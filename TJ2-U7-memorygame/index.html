<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="google" content="notranslate">
  <title>ç¿»ç‰Œé…å°ï¼ˆTV æ•™å®¤æ¨¡å¼ï¼‰10 çµ„é…å°ï½œ20 å¼µå¡</title>

  <style>
    /**************************************************************
     * ã€0ã€‘ä½ è¦æ›´æ›ã€Œåº•è‰²ï¼ˆèƒŒæ™¯ï¼‰ã€â¡ï¸ å°±æ”¹é€™è£¡ï¼ˆç²‰ç´…â†’ç²‰é»ƒ æ¼¸å±¤ï¼‰
     * ------------------------------------------------------------
     * âœ… éœ€æ±‚ï¼šæ·ºç²‰ç´… + æ·ºé»ƒè‰² æ¼¸å±¤ï¼ˆä¸è¦é»‘è‰²ææ€–ï¼‰
     **************************************************************/
    :root{
      --bg1:#ffd6e7;   /* æ·ºç²‰ç´… */
      --bg2:#fff2b8;   /* æ·ºé»ƒè‰² */
      --cardBackBorder: rgba(255,255,255,.55);
      --cardFrontBorder: rgba(255,255,255,.55);
      --shadow: 0 16px 28px rgba(0,0,0,.18);
      --text:#2a2a2a;
      --muted: rgba(0,0,0,.55);
      --matchOutline: rgba(46, 229, 157, .75);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Arial, "Microsoft JhengHei", sans-serif;

      /* âœ… ç²‰ç´…â†’ç²‰é»ƒæ¼¸å±¤èƒŒæ™¯ï¼ˆTV å‹å–„ï¼‰ */
      background: linear-gradient(135deg, var(--bg1) 0%, var(--bg2) 100%);

      color: var(--text);
      min-height:100vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      padding: 18px;
    }

    header{
      width:min(1400px, 98vw);
      text-align:center;
      margin: 6px 0 12px;
    }
    h1{
      margin:0;
      font-size: clamp(20px, 2.2vw, 34px);
      font-weight: 900;
      letter-spacing: .5px;
    }
    .subtitle{
      margin: 6px 0 0;
      font-size: clamp(13px, 1.4vw, 18px);
      color: var(--muted);
      font-weight: 700;
    }

    /**************************************************************
     * ã€1ã€‘æ£‹ç›¤è¨­å®šï¼ˆæ–¹æ¡ˆ Aï¼š10 çµ„é…å°ï¼20 å¼µå¡ï¼‰
     * ------------------------------------------------------------
     * âœ… 20 å¼µå¡å»ºè­°ç”¨ 5 æ¬„ x 4 åˆ—ï¼ˆé›»è¦–/æŠ•å½±å¾ˆé©åˆï¼‰
     **************************************************************/
    #board{
      width:min(1400px, 98vw);
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 12px;
      margin-top: 8px;
    }
    @media (max-width: 1000px){ #board{ grid-template-columns: repeat(4, 1fr); } }
    @media (max-width: 700px){  #board{ grid-template-columns: repeat(3, 1fr); } }

    /**************************************************************
     * ã€2ã€‘å¡ç‰‡ç¿»é¢å¤–è§€
     **************************************************************/
    .card{
      position:relative;
      aspect-ratio: 4 / 3;
      border-radius: 16px;
      perspective: 1000px;
      user-select:none;
      cursor:pointer;
      box-shadow: var(--shadow);
      background: transparent;
    }
    .card:active{ transform: translateY(1px); }

    .inner{
      position:absolute; inset:0;
      transition: transform 260ms ease;
      transform-style: preserve-3d;
      border-radius: 16px;
    }
    .card.flipped .inner,
    .card.matched .inner{
      transform: rotateY(180deg);
    }

    .face{
      position:absolute; inset:0;
      border-radius: 16px;
      backface-visibility: hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }

    /**************************************************************
     * ã€3ã€‘èƒŒé¢ï¼šå›ºå®š smile.pngï¼ˆä½ æä¾›çš„èƒŒé¢ç‰ˆé¢ï¼‰
     * ------------------------------------------------------------
     * âœ… ä½ è¦æ›èƒŒé¢åœ–ç‰‡ âœ çœ‹ JS å€å¡Šã€Bã€‘BACK_IMAGE
     **************************************************************/
    .back{
      background: rgba(255,255,255,.55);
      border: 3px solid var(--cardBackBorder);
    }
    .back img{
      width: 78%; height: 78%;
      object-fit: contain;
      filter: drop-shadow(0 10px 12px rgba(0,0,0,.18));
    }

    /**************************************************************
     * ã€4ã€‘æ­£é¢ï¼šæ–‡å­—å¡ or åœ–ç‰‡å¡
     **************************************************************/
    .front{
      transform: rotateY(180deg);
      background: rgba(255,255,255,.72);
      border: 3px solid var(--cardFrontBorder);
    }

    /* âœ… è€å¸«æ¨¡å¼ï¼šå­—è¦å¤§ï¼ˆå› ç‚ºå¡å¾ˆå¤šï¼Œä»ç¶­æŒé çœ‹æ¸…æ¥šï¼‰ */
    .word{
      width:100%; height:100%;
      display:flex; align-items:center; justify-content:center;
      text-align:center;
      padding: 10px;
      font-weight: 1000;
      letter-spacing: 1.2px;
      text-transform: lowercase;
      color:#1f1f1f;
      text-shadow: 0 6px 10px rgba(0,0,0,.10);
      font-size: clamp(22px, 2.2vw, 44px);
    }

    .pic{ width:100%; height:100%; display:flex; align-items:center; justify-content:center; padding: 10px; }
    .pic img{ width: 92%; height: 92%; object-fit: contain; filter: drop-shadow(0 12px 16px rgba(0,0,0,.15)); }

    .card.matched{
      cursor: default;
      outline: 4px solid var(--matchOutline);
      border-radius: 16px;
    }

    /**************************************************************
     * ã€5ã€‘å‹åˆ©ç•«é¢ï¼šåªåœ¨å…¨éƒ¨é…å°æˆåŠŸæ™‚å‡ºç¾ï¼ˆä¸­å¤®è¶…å¤§ç§’æ•¸ï¼‰
     * ------------------------------------------------------------
     * âœ… éŠæˆ²é€²è¡Œä¸­ï¼šå®Œå…¨ä¸é¡¯ç¤ºè¨ˆæ™‚å™¨ï¼ˆç¬¦åˆä½ çš„å®šç¨¿ï¼‰
     **************************************************************/
    #winOverlay{
      position:fixed; inset:0;
      display:none;
      align-items:center; justify-content:center;
      background: rgba(0,0,0,.45);
      z-index: 999;
    }
    #winOverlay.show{ display:flex; }

    .winBox{
      width:min(920px, 92vw);
      padding: 26px 18px;
      border-radius: 26px;
      background: rgba(255,255,255,.92);
      border: 3px solid rgba(255,255,255,.8);
      box-shadow: 0 30px 80px rgba(0,0,0,.35);
      text-align:center;
    }
    .winTitle{
      margin: 0 0 10px;
      font-weight: 900;
      font-size: clamp(20px, 3vw, 34px);
      color: #222;
    }
    .winTime{
      margin: 0;
      font-weight: 1000;
      letter-spacing: 2px;
      font-size: clamp(62px, 7vw, 130px); /* âœ… è¶…å¤§ç§’æ•¸ï¼šTV é è·é›¢ç”¨ */
      color: #111;
      text-shadow: 0 12px 20px rgba(0,0,0,.15);
    }
    .winHint{
      margin: 10px 0 0;
      font-size: clamp(14px, 2vw, 20px);
      color: rgba(0,0,0,.55);
      font-weight: 700;
    }
  </style>
</head>

<body>
  <header>
    <h1>ç¿»ç‰Œé…å°ï¼ˆTV æ•™å®¤æ¨¡å¼ï¼‰</h1>
    <div class="subtitle">éŠæˆ²ä¸­ä¸é¡¯ç¤ºè¨ˆæ™‚ï½œå…¨éƒ¨é…å°æˆåŠŸæ‰å…¬å¸ƒç§’æ•¸ï¼‹æ’­æ”¾éŸ³æ•ˆ</div>
  </header>

  <main id="board" aria-label="game board"></main>

  <!-- âœ… å‹åˆ©ç¬é–“ï¼šä¸­å¤®è¶…å¤§ç§’æ•¸ -->
  <div id="winOverlay" role="dialog" aria-modal="true">
    <div class="winBox">
      <p class="winTitle">ğŸ‰ å…¨éƒ¨é…å°æˆåŠŸï¼</p>
      <p class="winTime" id="winTimeText">00.00s</p>
      <p class="winHint">å³å°‡è‡ªå‹•æ´—ç‰Œé€²å…¥ä¸‹ä¸€å±€â€¦</p>
    </div>
  </div>

  <!-- âœ… å‹åˆ©éŸ³æ•ˆï¼šä½ è¦æ›éŸ³æ•ˆæª”åå°±çœ‹ JS å€å¡Šã€Cã€‘WIN_SOUND -->
  <audio id="winSound" preload="auto"></audio>

  <script>
    /*****************************************************************
     * ã€Aã€‘ä½ è¦æ›´æ›ã€Œå–®å­— + åœ–ç‰‡ã€â¡ï¸ å°±æ”¹é€™è£¡ï¼ˆ10 çµ„é…å°ï¼‰
     * --------------------------------------------------------------
     * âœ… ä½ æŒ‡å®šçš„ 10 å€‹å–®å­—ï¼ˆå°æ‡‰ä½ çš„ images æª”åï¼‰ï¼š
     * bell, clock, doll, keg, kid, kite, lab, lamp, leg, wall
     *
     * è¦å‰‡ï¼š
     * - æ¯ä¸€çµ„æœƒè‡ªå‹•ç”Ÿæˆå…©å¼µå¡ï¼šæ–‡å­—å¡ + åœ–ç‰‡å¡
     * - 10 çµ„ â‡’ 20 å¼µå¡ï¼ˆæ–¹æ¡ˆ Aï¼‰
     *****************************************************************/
    const PAIRS = [
      { word:"bell",  img:"bell.png"  },
      { word:"clock", img:"clock.png" },
      { word:"doll",  img:"doll.png"  },
      { word:"keg",   img:"keg.png"   },
      { word:"kid",   img:"kid.png"   },
      { word:"kite",  img:"kite.png"  },
      { word:"lab",   img:"lab.png"   },
      { word:"lamp",  img:"lamp.png"  },
      { word:"leg",   img:"leg.png"   },
      { word:"wall",  img:"wall.png"  },
    ];
    // â†‘â†‘â†‘ ä»¥å¾Œè¦æ›å…§å®¹ï¼šåªæ”¹é€™å€‹æ¸…å–®ï¼ˆå–®å­— / åœ–ç‰‡æª”åï¼‰

    /*****************************************************************
     * ã€Bã€‘ä½ è¦æ›´æ›ã€ŒèƒŒé¢åœ–ç‰‡ã€â¡ï¸ å°±æ”¹é€™è£¡
     * --------------------------------------------------------------
     * âœ… ä½ æä¾›ï¼šimages/smile.png æ˜¯èƒŒé¢ç‰ˆé¢
     *****************************************************************/
    const BACK_IMAGE = "images/smile.png";

    /*****************************************************************
     * ã€Cã€‘ä½ è¦æ›´æ›ã€Œå‹åˆ©éŸ³æ•ˆã€â¡ï¸ å°±æ”¹é€™è£¡
     * --------------------------------------------------------------
     * âœ… ä½ æä¾›ï¼šsounds/harry.mp3
     *****************************************************************/
    const WIN_SOUND = "sounds/harry.mp3";

    /*****************************************************************
     * ã€Dã€‘å‹åˆ©ç§’æ•¸é¡¯ç¤ºåœç•™å¤šä¹…ï¼ˆæ¯«ç§’ï¼‰â¡ï¸ æƒ³æ›´éœ‡æ’¼å°±åŠ é•·
     *****************************************************************/
    const WIN_SHOW_MS = 1800;

    /*****************************************************************
     * ã€Eã€‘TTSï¼ˆé›»è…¦å”¸å–®å­—ï¼‰è¨­å®š
     * --------------------------------------------------------------
     * âœ… éœ€æ±‚ï¼šç¿»ç‰Œæ™‚ï¼ˆç¿»åˆ°æ–‡å­—å¡æˆ–åœ–ç‰‡å¡ï¼‰éƒ½è¦å”¸è©²å–®å­—
     *****************************************************************/
    const TTS_LANG  = "en-US";
    const TTS_RATE  = 0.90;
    const TTS_PITCH = 1.00;

    /*****************************************************************
     * ä»¥ä¸‹æ˜¯éŠæˆ²æ ¸å¿ƒï¼šé€šå¸¸ä¸éœ€è¦æ”¹ï¼ˆé™¤éä½ è¦åŠ æ–°åŠŸèƒ½ï¼‰
     *****************************************************************/
    const boardEl = document.getElementById("board");
    const winOverlay = document.getElementById("winOverlay");
    const winTimeText = document.getElementById("winTimeText");
    const winSound = document.getElementById("winSound");
    winSound.src = WIN_SOUND;

    let deck = [];
    let firstCard = null;
    let secondCard = null;
    let lock = false;

    // âœ… è¨ˆæ™‚ï¼šèƒŒæ™¯è¨ˆç®—ï¼ŒUI ä¸é¡¯ç¤ºï¼›æˆåŠŸæ‰å…¬å¸ƒ
    let startTime = 0;
    let running = false;

    // TTS
    const canSpeak = ("speechSynthesis" in window) && ("SpeechSynthesisUtterance" in window);
    function speakWord(word){
      if(!canSpeak) return;
      try{
        window.speechSynthesis.cancel();
        const u = new SpeechSynthesisUtterance(word);
        u.lang  = TTS_LANG;
        u.rate  = TTS_RATE;
        u.pitch = TTS_PITCH;
        window.speechSynthesis.speak(u);
      }catch(e){}
    }

    function shuffle(arr){
      for(let i = arr.length - 1; i > 0; i--){
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    // âœ… æ¯å€‹å–®å­—åšå…©å¼µç‰Œï¼ˆword + picï¼‰â†’ 20 å¼µ
    function buildDeck(){
      const cards = [];
      for(const p of PAIRS){
        cards.push({ type:"word", key:p.word, word:p.word, img:p.img });
        cards.push({ type:"pic",  key:p.word, word:p.word, img:p.img });
      }
      return shuffle(cards);
    }

    function formatSeconds(ms){
      return (ms/1000).toFixed(2) + "s";
    }

    function startHiddenTimerIfNeeded(){
      // âœ… ç¬¬ä¸€æ¬¡ç¿»ç‰Œæ‰é–‹å§‹è¨ˆæ™‚ï¼ˆä»ç„¶ä¸é¡¯ç¤ºåœ¨ç•«é¢ä¸Šï¼‰
      if(!running){
        running = true;
        startTime = performance.now();
      }
    }

    function renderBoard(deck){
      boardEl.innerHTML = "";
      deck.forEach((cardData, idx) => {
        const card = document.createElement("div");
        card.className = "card";
        card.dataset.index = String(idx);
        card.dataset.key   = cardData.key;    // é…å°ç”¨ key
        card.dataset.word  = cardData.word;   // å”¸çš„å–®å­—
        card.dataset.type  = cardData.type;   // word / pic

        card.innerHTML = `
          <div class="inner">
            <div class="face back">
              <img src="${BACK_IMAGE}" alt="back" />
            </div>
            <div class="face front">
              ${
                cardData.type === "word"
                  ? `<div class="word">${cardData.word}</div>`
                  : `<div class="pic"><img src="images/${cardData.img}" alt="${cardData.word}" /></div>`
              }
            </div>
          </div>
        `;

        card.addEventListener("click", () => onCardClick(card));
        boardEl.appendChild(card);
      });
    }

    function resetRound(){
      firstCard = null;
      secondCard = null;
      lock = false;

      running = false;
      startTime = 0;

      deck = buildDeck();
      renderBoard(deck);

      winOverlay.classList.remove("show");
    }

    function onCardClick(cardEl){
      if(lock) return;
      if(cardEl.classList.contains("matched")) return;
      if(cardEl.classList.contains("flipped")) return;
      if(cardEl === firstCard) return;

      startHiddenTimerIfNeeded();       // âœ… èƒŒæ™¯é–‹å§‹è¨ˆæ™‚ï¼ˆä¸é¡¯ç¤ºï¼‰
      cardEl.classList.add("flipped");  // ç¿»ç‰Œ
      speakWord(cardEl.dataset.word);   // âœ… ç¿»åˆ°å°±å”¸ï¼ˆæ–‡å­—å¡/åœ–ç‰‡å¡éƒ½å”¸ï¼‰

      if(!firstCard){
        firstCard = cardEl;
        return;
      }

      secondCard = cardEl;
      lock = true;

      // âœ… å¿…é ˆæ˜¯ã€Œæ–‡å­— + åœ–ç‰‡ã€æ‰ç®—æˆåŠŸï¼ˆåŒå­— key ä¸€æ¨£ï¼Œtype ä¸ä¸€æ¨£ï¼‰
      const isMatch =
        firstCard.dataset.key === secondCard.dataset.key &&
        firstCard.dataset.type !== secondCard.dataset.type;

      if(isMatch){
        firstCard.classList.add("matched");
        secondCard.classList.add("matched");

        firstCard = null;
        secondCard = null;
        lock = false;

        // å…¨éƒ¨é…å°æˆåŠŸï¼Ÿ
        if(document.querySelectorAll(".card.matched").length === deck.length){
          onWin();
        }
      }else{
        setTimeout(() => {
          firstCard.classList.remove("flipped");
          secondCard.classList.remove("flipped");
          firstCard = null;
          secondCard = null;
          lock = false;
        }, 650);
      }
    }

    async function onWin(){
      // âœ… æˆåŠŸæ‰å…¬å¸ƒç§’æ•¸ï¼ˆä¸­å¤®å¤§å­—ï¼‰
      const elapsed = performance.now() - startTime;
      winTimeText.textContent = formatSeconds(elapsed);
      winOverlay.classList.add("show");

      // âœ… æˆåŠŸç¬é–“æ’­æ”¾éŸ³æ•ˆï¼ˆä¸€æ¬¡ï¼‰
      try{
        winSound.currentTime = 0;
        await winSound.play();
      }catch(e){}

      // åœç•™ä¸€ä¸‹ â†’ è‡ªå‹•æ´—ç‰Œä¸‹ä¸€å±€
      setTimeout(() => {
        resetRound();
      }, WIN_SHOW_MS);
    }

    // ç¬¬ä¸€å±€é–‹å§‹
    resetRound();
  </script>
</body>
</html>
